<html lang="en">
<head>
  <meta charset="utf-8">
  <title>jQuery.getJSON</title>
  <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
</head>
<body>
  
<script>
	
function getSteemPrice() {
	return new Promise((resolve) => {
		let url = "https://api.upbit.com/v1/ticker?markets=KRW-STEEM";
		$.getJSON(url, (data) => {
			resolve(data[0].trade_price);
		});
		//reject("エラー");
	});
};
	
function getSbdPrice() {
    return new Promise((resolve, reject) => {
        let url = "https://api.upbit.com/v1/ticker?markets=KRW-SBD";
        $.getJSON(url, (data) => {
		resolve(data[0].trade_price);
        });
	reject("エラー");       
    });
};
  
async function rate(){
	const steem = await getSteemPrice();
	const sbd = await getSbdPrice();
	return {'steem': steem, 'sbd': sbd, 'rate': sbd / steem};
};
	
function aaa(){	
	rate().then(result => {
		$("#steem").html(result['steem']);
		$("#sbd").html(result['sbd']);
		$("#rate").html(result['rate']);
	}).catch(err => {
		console.log(err);
	});
};
  
    
aaa();
</script>

<h1>STEEM価格</h1>
<b id="steem"></b>ウォン (upbit取引所)
<br/>
<b id="sbd"></b>ウォン (upbit取引所)
<br/>
レート <b id="rate"></b>

</body>
</html>
