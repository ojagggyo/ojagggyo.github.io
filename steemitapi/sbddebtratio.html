<!doctype html>
<html lang="en">
    <head>
        <title>reputation</title>
        <meta charset="utf-8">
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://github.com/steemit/steem-js/releases/download/v0.7.7/steem.min.js"></script>
        <script src="https://ojagggyo.github.io/steemitapi/myutil.js"></script>
        
        <script>            
            module.exports.get_dynamic_global_properties = async () => {
                return new Promise((resolve, reject) => {
                    (async() => {
                    client.database.getDynamicGlobalProperties().then(
                        function(result) {        
                            resolve(result)
                        },
                        function(error) {
                            reject(error)
                        }
                    )
                    })();
                });
            };
            
            getCurrentMedianHistoryPrice = async () => {
                return new Promise((resolve, reject) => {
                    (async() => {
                        client.database.getCurrentMedianHistoryPrice().then(
                            function(result) {
                                console.log('getCurrentMedianHistoryPrice',result)
                                resolve(result)
                            },
                            function(error) {
                                reject(error)
                            }
                        )
                    })();
                });
            };

          
            window.onload = function() {
              
                username = getUserName();
                $("#username").text(username);
                getAccountsAsync(username).then(result => {
                    console.log(result);
                    reputation = repLog10(result.reputation);          
                    var text = "Reputationは " + (reputation).toFixed(4) + " です。";
                    $("#text").text(text);
                }).catch(err => {
                    $("#text").text("エラー");
                    $('#text').css('color','red');
                });
            };
        </script>
    </head>
    <body>
        <h1 id="text"></h1>
    </body>
</html>
